<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Filter</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .hide {
            display: none;
        }
        .show {
            display: block;
        }
        .filters {
            list-style-type: none;
            display: flex;
            justify-content: center;
            padding: 0;
        }
        .filters li {
            margin: 0 10px;
            cursor: pointer;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
        }
        .filters li.active {
            background-color: #0056b3;
        }
        .meeting-item {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
        }
        .thumb img {
            max-width: 100%;
            border-radius: 10px;
        }
    </style>
</head>
<body>

<!-- Filters -->
<ul class="filters">
    <li class="active" data-filter="*">All Classes</li>
    <li data-filter=".class-5-8">Class 5-8</li>
    <li data-filter=".class-9-10">Class 9-10</li>
    <li data-filter=".class-11-12">Class 11-12</li>
</ul>

<!-- Course Container -->
<div class="container mt-5">
    <div class="row" id="courses-container">
        <!-- Courses will be dynamically added here -->
    </div>
</div>

<!-- Bootstrap and jQuery scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
      const coursesContainer = document.getElementById('courses-container');

      // Fetch the courses data from test.json
      fetch('assets/json/test.json')
          .then(response => {
              if (!response.ok) {
                  throw new Error('Network response was not ok');
              }
              return response.json();
          })
          .then(courses => {
              // Dynamically render courses
              courses.col1.forEach((course, i) => {
                  const courseElement = document.createElement('div');
                  // Ensure class names are correctly set from the course data
                  const classNames = Array.isArray(course.class) ? course.class : [course.class];
                  courseElement.classList.add('col-lg-4', 'templatemo-item-col', 'course-item', ...classNames);

                  // Course Item Markup
                  courseElement.innerHTML = `
                      <div class="meeting-item">
                          <div class="thumb">
                              <div class="price">
                                  <span class="fa fa-cloud-download icon" data-bs-toggle="modal" data-bs-target="#syllabusModal${i}" style="font-size:23px;color:red"></span>
                              </div>
                              <img src="assets/images/junior-geeks/${course.image}">
                          </div>
                          <div class="down-content text-center">
                              <h4>${course.course_name}</h4>
                              <br>
                              <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#${course.title}">More Info</button>
                              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#contactModal" style="margin-right: 10px;">Contact Us</button>
                          </div>
                      </div>
                  `;
                  coursesContainer.appendChild(courseElement);

                  // Modal Markup
                  const modalMarkup = `
                      <div class="modal fade" id="syllabusModal${i}" tabindex="-1" aria-labelledby="syllabusModalLabel${i}" aria-hidden="true">
                          <div class="modal-dialog">
                              <div class="modal-content">
                                  <div class="modal-header">
                                      <h4 class="modal-title" id="syllabusModalLabel${i}">${course.title.replace(/_/g, ' ')}</h4>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                  </div>
                                  <div class="modal-body">
                                      <h2 align="left">Download Syllabus</h2>
                                      <ul id="pdfList${i}" align="left"></ul>
                                      <br>
                                  </div>
                                  <div class="modal-footer">
                                      <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                                  </div>
                              </div>
                          </div>
                      </div>
                  `;
                  document.body.insertAdjacentHTML('beforeend', modalMarkup);

                  // Populate the syllabus modal
                  const pdfList = document.getElementById(`pdfList${i}`);
                  course.syllabus.forEach((syllabus, index) => {
                      const listItem = document.createElement('li');
                      const anchor = document.createElement('a');
                      anchor.href = syllabus;
                      anchor.textContent = `${course.syllabus_name[index]}`;
                      anchor.target = "_blank";
                      listItem.appendChild(anchor);
                      pdfList.appendChild(listItem);
                  });
              });
          })
          .catch(error => {
              console.error('There was a problem with the fetch operation:', error);
          });
  });

    // Filter logic
    $(document).ready(function () {
        $(".filters li").click(function () {
            var filterValue = $(this).attr('data-filter');
            $(".filters li").removeClass('active');
            $(this).addClass('active');

            if (filterValue == "*") {
                $(".course-item").show();
            } else {
                $(".course-item").hide();
                $(filterValue).show();
            }
        });
    });
</script>

</body>
</html>
